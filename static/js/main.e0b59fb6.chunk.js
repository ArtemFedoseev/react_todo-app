(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var c,r=n(13),a=n.n(r),o=(n(19),n(20),n(21),n(9)),i=n(2),s=n(14),u=n(6),l=n(7),d=n(3),f=n(5),p=n.n(f),j=n(0),b=n(11),h=n.n(b),m=n(1),O=function(e){var t=e.title,n=e.completed,c=e.id,r=e.toggleTodo,a=e.removeTodo,o=e.changeTodoTitle,i=Object(j.useState)(!1),s=Object(d.a)(i,2),u=s[0],l=s[1],f=Object(j.useState)(t),p=Object(d.a)(f,2),b=p[0],O=p[1],v=function(){""===b.replaceAll(" ","")?O(t):o(b,c),l(!1)};return Object(m.jsxs)("li",{className:h()({completed:n},{editing:u}),children:[Object(m.jsxs)("div",{className:h()({view:!n},{completed:n}),children:[Object(m.jsx)("input",{type:"checkbox",id:"todo-".concat(c),className:"toggle",onChange:function(){r(c)},checked:n}),Object(m.jsx)("label",{htmlFor:"none",onDoubleClick:function(){n||l(!0)},children:t}),Object(m.jsx)("button",{type:"button",className:"destroy",onClick:function(){a(c)},children:" "})]}),Object(m.jsx)("input",{type:"text",className:"edit",value:b,onChange:function(e){O(e.target.value)},onBlur:function(){v()},onKeyUp:function(e){switch(e.key){case"Enter":v();break;case"Escape":O(t),l(!1)}}})]})};!function(e){e.active="active",e.completed="completed"}(c||(c={}));var v=[{title:"All",value:null},{title:"Active",value:c.active},{title:"Completed",value:c.completed}],x=function(e){var t=e.title,n=e.appliedFilter,c=e.value,r=e.setFilter;return Object(m.jsx)("button",{type:"button",className:h()({selected:c===n}),onClick:function(){r(c)},children:t})},g=function(e){return e.filter((function(e){return!e.completed})).length},y=function(e){var t=e.todos,n=e.clearCompletedTodos,c=Object(i.f)(),r=Object(i.e)().search,a=new URLSearchParams(r),o=a.get("filter"),s=function(e){null===e?a.delete("filter"):a.set("filter",e),c({search:a.toString()})};return Object(m.jsxs)("footer",{className:"footer",children:[Object(m.jsxs)("span",{className:"todo-count",children:[g(t)," ","items left"]}),Object(m.jsx)("ul",{className:"filters",children:v.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(x,Object(u.a)(Object(u.a)({},e),{},{appliedFilter:o,setFilter:s}))},e.value)}))}),Object(m.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){n()},children:"Clear completed"})]})},k=2474,w="https://mate.academy/students-api",N=function(){var e="".concat(w,"/users/").concat(k);return fetch(e).then((function(e){return e.json()}))},C=function(){var e="".concat(w,"/todos?userId=").concat(k);return fetch(e).then((function(e){return e.json()}))},T=function(e){var t="".concat(w,"/todos");return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,userId:k,completed:!1})}).then((function(e){return e.json()}))},S=function(e){var t="".concat(w,"/todos/").concat(e);return fetch(t,{method:"DELETE"}).then((function(e){return e.json()}))},F=function(e,t){var n="".concat(w,"/todos/").concat(e);return fetch(n,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))},E=function(){var e=Object(j.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(j.useState)(""),o=Object(d.a)(a,2),f=o[0],b=o[1],h=Object(j.useState)(!0),v=Object(d.a)(h,2),x=v[0],k=v[1],w=Object(j.useState)(""),E=Object(d.a)(w,2),A=E[0],I=E[1],J=Object(j.useState)(""),L=Object(d.a)(J,2),P=L[0],U=L[1],D=Object(i.e)().search,B=function(e){switch(e){case"active":return c.active;case"completed":return c.completed;default:return null}}(new URLSearchParams(D).get("filter")),R=function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:(t=e.sent).error?U("Failed to fecth User Info"):(I(t.name),k(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:(t=e.sent).error?U("Failed to fetch todos"):r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(j.useEffect)((function(){R(),_()}),[]);var H=function(){var e=Object(l.a)(p.a.mark((function e(t){var c,a,o,i,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]&&s[1],o=null===(c=n.find((function(e){return e.id===t})))||void 0===c?void 0:c.completed,a||(i=n.map((function(e){return e.id===t?Object(u.a)(Object(u.a)({},e),{},{completed:!e.completed}):e})),r(i)),void 0===o){e.next=8;break}return e.next=6,F(t,{completed:!o});case 6:e.sent.error&&U("Failed to update todo on server");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.filter((function(e){return e.id!==t})),r(c),e.next=4,S(t);case 4:e.sent.error&&U("Failed to remove todo from server");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==f.replaceAll(" ","")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,T(f);case 6:if(!(c=e.sent).error){e.next=10;break}return U("Failed to add todo to server"),e.abrupt("return");case 10:r([].concat(Object(s.a)(n),[{title:f.trim(),completed:!1,id:c.id}])),b("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(p.a.mark((function e(t,c){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e){return e.id===c?Object(u.a)(Object(u.a)({},e),{},{title:t.trim()}):Object(u.a)({},e)})),r(a),e.next=4,F(c,{title:t});case 4:e.sent.error&&U("Failed to update todo on server");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(e,t){return e.filter((function(e){switch(t){case c.active:return!e.completed;case c.completed:return e.completed;default:return!0}}))}(n,B);return Object(m.jsxs)("div",{children:[Object(m.jsxs)("section",{className:"todoapp",children:[Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)("h1",{children:x?"Loading...":A}),Object(m.jsx)("form",{onSubmit:M,children:Object(m.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:f,onChange:function(e){b(e.target.value)}})})]}),Object(m.jsxs)("section",{className:"main",children:[Object(m.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",onChange:function(){!function(){var e=0===g(n),t=n.filter((function(t){return e||!1===t.completed})).map((function(e){return e.id})),c=n.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{completed:!e})}));r(c),t.forEach((function(e){H(e,!0)}))}()},checked:0===g(n)}),Object(m.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(m.jsx)("ul",{className:"todo-list",children:q.map((function(e){return Object(m.jsx)(O,Object(u.a)(Object(u.a)({},e),{},{toggleTodo:H,removeTodo:K,changeTodoTitle:W}),e.id)}))})]}),Object(m.jsx)(y,{todos:n,clearCompletedTodos:function(){var e=n.filter((function(e){return!e.completed})),t=function(e){return e.filter((function(e){return e.completed})).map((function(e){return e.id}))}(n);r(e),t.forEach(function(){var e=Object(l.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:e.sent.error&&U("Failed to remove todo from server");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})]}),Object(m.jsx)("div",{className:"error-message",children:P})]})};var A=function(){return Object(m.jsx)(i.c,{children:Object(m.jsx)(i.a,{path:"/",element:Object(m.jsx)(E,{})})})};a.a.render(Object(m.jsx)(o.a,{children:Object(m.jsx)(A,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.e0b59fb6.chunk.js.map