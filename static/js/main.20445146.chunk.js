(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r,c=n(13),o=n.n(c),a=(n(19),n(20),n(21),n(11)),i=n(14),u=n(6),s=n(7),l=n(3),d=n(5),f=n.n(d),p=n(0),j=n(1),b=n(10),h=n.n(b),m=n(2),v=function(e){var t=e.title,n=e.completed,r=e.id,c=e.toggleTodo,o=e.removeTodo,a=e.changeTodoTitle,i=Object(p.useState)(!1),u=Object(l.a)(i,2),s=u[0],d=u[1],f=Object(p.useState)(t),j=Object(l.a)(f,2),b=j[0],v=j[1],O=function(){""===b.replaceAll(" ","")?v(t):a(b,r),d(!1)};return Object(m.jsxs)("li",{className:h()({completed:n},{editing:s}),children:[Object(m.jsxs)("div",{className:h()({view:!n},{completed:n}),children:[Object(m.jsx)("input",{type:"checkbox",id:"todo-".concat(r),className:"toggle",onChange:function(){c(r)},checked:n}),Object(m.jsx)("label",{htmlFor:"none",onDoubleClick:function(){n||d(!0)},children:t}),Object(m.jsx)("button",{type:"button",className:"destroy",onClick:function(){o(r)},children:" "})]}),Object(m.jsx)("input",{type:"text",className:"edit",value:b,onChange:function(e){v(e.target.value)},onBlur:function(){O()},onKeyUp:function(e){switch(e.key){case"Enter":O();break;case"Escape":v(t),d(!1)}}})]})};!function(e){e.active="active",e.completed="completed"}(r||(r={}));var O=[{title:"All",value:null},{title:"Active",value:r.active},{title:"Completed",value:r.completed}],x=function(e){var t=e.title,n=e.appliedFilter,r=e.value,c=e.setFilter;return Object(m.jsx)("button",{type:"button",className:h()({selected:r===n}),onClick:function(){c(r)},children:t})},g=function(e){return e.filter((function(e){return!e.completed})).length},y=function(e){var t=e.todos,n=e.clearCompletedTodos,r=Object(j.d)(),c=Object(j.c)().search,o=new URLSearchParams(c),a=o.get("filter"),i=function(e){null===e?o.delete("filter"):o.set("filter",e),r({search:o.toString()})};return Object(m.jsxs)("footer",{className:"footer",children:[Object(m.jsxs)("span",{className:"todo-count",children:[g(t)," ","items left"]}),Object(m.jsx)("ul",{className:"filters",children:O.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(x,Object(u.a)(Object(u.a)({},e),{},{appliedFilter:a,setFilter:i}))},e.value)}))}),Object(m.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){n()},children:"Clear completed"})]})},k=2474,w="https://mate.academy/students-api",N=function(){var e="".concat(w,"/users/").concat(k);return fetch(e).then((function(e){return e.json()}))},C=function(){var e="".concat(w,"/todos?userId=").concat(k);return fetch(e).then((function(e){return e.json()}))},T=function(e){var t="".concat(w,"/todos");return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,userId:k,completed:!1})}).then((function(e){return e.json()}))},S=function(e){var t="".concat(w,"/todos/").concat(e);return fetch(t,{method:"DELETE"}).then((function(e){return e.json()}))},F=function(e,t){var n="".concat(w,"/todos/").concat(e);return fetch(n,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))},E=function(){var e=Object(p.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(p.useState)(""),a=Object(l.a)(o,2),d=a[0],b=a[1],h=Object(p.useState)(!0),O=Object(l.a)(h,2),x=O[0],k=O[1],w=Object(p.useState)(""),E=Object(l.a)(w,2),A=E[0],I=E[1],J=Object(p.useState)(""),L=Object(l.a)(J,2),P=L[0],U=L[1],D=Object(j.c)().search,B=function(e){switch(e){case"active":return r.active;case"completed":return r.completed;default:return null}}(new URLSearchParams(D).get("filter")),R=function(){var e=Object(s.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:(t=e.sent).error?U("Failed to fecth User Info"):(I(t.name),k(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:(t=e.sent).error?U("Failed to fetch todos"):c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){R(),_()}),[]);var H=function(){var e=Object(s.a)(f.a.mark((function e(t){var r,o,a,i,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.length>1&&void 0!==s[1]&&s[1],a=null===(r=n.find((function(e){return e.id===t})))||void 0===r?void 0:r.completed,o||(i=n.map((function(e){return e.id===t?Object(u.a)(Object(u.a)({},e),{},{completed:!e.completed}):e})),c(i)),void 0===a){e.next=8;break}return e.next=6,F(t,{completed:!a});case 6:e.sent.error&&U("Failed to update todo on server");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.filter((function(e){return e.id!==t})),c(r),e.next=4,S(t);case 4:e.sent.error&&U("Failed to remove todo from server");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==d.replaceAll(" ","")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,T(d);case 6:if(!(r=e.sent).error){e.next=10;break}return U("Failed to add todo to server"),e.abrupt("return");case 10:c([].concat(Object(i.a)(n),[{title:d.trim(),completed:!1,id:r.id}])),b("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(f.a.mark((function e(t,r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.map((function(e){return e.id===r?Object(u.a)(Object(u.a)({},e),{},{title:t.trim()}):Object(u.a)({},e)})),c(o),e.next=4,F(r,{title:t});case 4:e.sent.error&&U("Failed to update todo on server");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(e,t){return e.filter((function(e){switch(t){case r.active:return!e.completed;case r.completed:return e.completed;default:return!0}}))}(n,B);return Object(m.jsxs)("div",{children:[Object(m.jsxs)("section",{className:"todoapp",children:[Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)("h1",{children:x?"Loading...":A}),Object(m.jsx)("form",{onSubmit:M,children:Object(m.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:d,onChange:function(e){b(e.target.value)}})})]}),Object(m.jsxs)("section",{className:"main",children:[Object(m.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",onChange:function(){!function(){var e=0===g(n),t=n.filter((function(t){return e||!1===t.completed})).map((function(e){return e.id})),r=n.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{completed:!e})}));c(r),t.forEach((function(e){H(e,!0)}))}()},checked:0===g(n)}),Object(m.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(m.jsx)("ul",{className:"todo-list",children:q.map((function(e){return Object(m.jsx)(v,Object(u.a)(Object(u.a)({},e),{},{toggleTodo:H,removeTodo:K,changeTodoTitle:W}),e.id)}))})]}),Object(m.jsx)(y,{todos:n,clearCompletedTodos:function(){var e=n.filter((function(e){return!e.completed})),t=function(e){return e.filter((function(e){return e.completed})).map((function(e){return e.id}))}(n);c(e),t.forEach(function(){var e=Object(s.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:e.sent.error&&U("Failed to remove todo from server");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})]}),Object(m.jsx)("div",{className:"error-message",children:P})]})};var A=function(){return Object(m.jsx)(E,{})};o.a.render(Object(m.jsx)(a.a,{children:Object(m.jsx)(A,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.20445146.chunk.js.map